<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>WOOFLY</title>
<link rel="icon" href="/image/woofly.png">
<style>
	.board-list {
		cursor: pointer;
	}
</style>
</head>
<body>
	<div th:replace="~{common/topAdd :: topAdd}"></div>
	  <div class="container mt-5 mb-3" >
      	<div class="container d-flex px-0 border-bottom border-black border-3 justify-content-between align-items-center">
			<h1>도그워커</h1>
			<a role="button" href="/board/dw/write" class="btn btn-dark btn-sm h-50">글 작성</a>
		</div>
		<br>
		<div>
			<a class="btn btn-outline-secondary btn-sm px-3 active" href="/board/dw">도그워커게시판</a>
	 		<a class="btn btn-outline-secondary btn-sm px-3" href="/board/dwReview">도그워커후기</a>
		</div>
		
		<div class="mt-3" id="searchArea" >			
			<div class="row g-1 justify-content-">
				<label for="search-box" class="form-label">게시글 검색</label>
				<select class="col-1" style="border: 1px solid #D2D6D9; border-radius: 6px;">
					<option value="" disabled selected>검색조건</option>
					<option value="writer" th:value="writer">작성자</option>
					<option value="title" th:value="title">제목</option>
					<option value="all" th:value="all">제목+작성자</option>
				</select>
				
				
				<div class="col-10">						
			    <input type="text" class="form-control" id="search-box" placeholder="검색어를 입력해주세요">
				</div>
				<div class="col-1">
					<button class="btn btn-dark">검색 하기</button>
				</div>
			</div>
		</div>
		
				
		<div class="container board-list">
			<div class="row mt-3 border-top border-secondary text-center board-list" style="height: 80px;" th:each="dw : ${list}" th:attr="data-dwNo=${dw.dwNo}">
				<div class="col-1 board" style="line-height: 80px;">[[${ dw.dwNo }]]</div>
				<div class="col-1 board" style="line-height: 80px;"><img src="https://thumbnail9.coupangcdn.com/thumbnails/remote/230x230ex/image/vendor_inventory/5efb/fd48acde4c9b97aa39e55704c0c100cc95fc22024dc80dc1a6e14801cdfd.jpg"  alt="" style="height: 85px; width: 85px; margin-top: 5px; " ></div>
				<div class="col-2 board" style="line-height: 80px;">[[${ dw.mbNickName }]]</div>
				<div class="col-6 board" style="line-height: 80px;">[[${ dw.dwTitle }]]</div>
				<div class="col-2 board" style="line-height: 80px;">[[${ dw.dwCreateDate }]]</div>
			</div>			
		</div>
		
		<nav class="border-top border-black pt-5"  th:with="loc=${loc}">
		  	<ul class="pagination justify-content-center">
		    	<li class="page-item">
	            	<a class="page-link" th:href="@{${loc}(page=${pi.currentPage-1})}" aria-label="Previous">
	            		<span aria-hidden="true">&laquo;</span>
	              	</a> 
	            </li>
            	<li class="page-item" th:each="p : ${#numbers.sequence(pi.startPage, pi.endPage)}">
            		<a class="page-link" th:href="@{${loc}(page=${p})}">[[${ p }]]</a>
            	</li> <!-- 게시글 페이지 번호 점점 커지게 하는 것 -->
	            <li class="page-item">
	            	<a class="page-link" th:href="@{${loc}(page=${pi.currentPage+1})}" aria-label="Next">
	            		<span aria-hidden="true">&raquo;</span>
	            	</a>
	            </li>
		  	</ul>
		</nav>
	</div>
	
	<script>
		
		// 해당 페이지 nav bar 강조 넣기
		// 페이지 별로 id만 수정 하면 됨 eg.) topAdd1, topAdd2, ...
		const boardNav = document.getElementById("topAdd4");
		$(boardNav).addClass('active');
		
		// 각 게시물 별로 클릭 이벤트 넣는 부분
		const boardList = document.querySelectorAll('.board-list .board');
	    boardList.forEach(board => {
	        board.addEventListener('click', () => {
	            const dwNo = board.parentElement.querySelector('.board:nth-child(1)').innerText;
	            const currentPage = /*[[${pi.currentPage}]]*/1;
	            console.log(dwNo);
	            console.log(currentPage);
	            window.location.href = `/board/dw/detail?dwNo=${dwNo}&page=${currentPage}`;
	        });
	    });
		
		
	</script>
</body>
</html>