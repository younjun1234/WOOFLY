<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>WOOFLY</title>
<link rel="icon" href="/image/woofly.png">
</head>
<body>
	<div th:replace="~{common/topAdd :: topAdd}"></div>
	 <div class="container mt-5 mb-3">
      	<div class="container d-flex px-0 mb-3 border-bottom border-black border-3 justify-content-between align-items-center">
			<h1>실종신고 게시판</h1>
			<h3>게시글 작성하기</h3>
		</div>
		<div class="container">
			<!-- 사진 작성자 작성일자 드롭다운 -->
			<div class="header-container d-flex mt-3 justify-content-between">
				<div class="d-flex">
					<img class="float-start me-4" src="/image/dog1.jpg" alt="" style="height: 50px; width: 50px; border-radius: 50px;">
					<div class="header-text-container">
						<h6>작성자 <!-- 사용자 정보가 있을 때만 출력 -->
							 <!--loginUser가 null이 아닐 떄(로그인된 상태)는 작성자 부분에 회원의 닉네임을 띄우고,
							 	 loginUser가 null일 때(로그인 되지 않은 상태)는 작성자 부분에 Guest를 띄운다-->
							 <span th:if="${session.loginUser == null}">Guest</span>
							 <span th:unless="${session.loginUser == null}" name="mbNickName">[[${session.loginUser.mbNickName}]]</span>
   							 <!--<span th:unless="${session.loginUser != null}">Guest</span>-->
			            </h6>
			            <p>날짜 <!-- 현재 날짜 출력 -->
			                <span th:text="${#dates.format(#dates.createNow(), 'yyyy-MM-dd')}" name="mCreateDate"></span>
			            </p>
					</div>
				</div>
			</div>
			
			<form  action="/board/lost/insertLostBoard" method="POST" enctype="multipart/form-data" id="attmForm">
				<div class="mb-3" style="width: 24%;">
					<label for="title" class="form-label">실종 상태 여부</label>
				    <select class="form-select mb-1" id="lostStatus" name="mRescue">
				    	<option th:value="1" value="1">구조중</option>
						<option th:value="2" value="2">구조완료</option>
					</select>
				</div>
				<div class="mb-3">
					<label for="title" class="form-label"></label><!--제목-->
				  	<input type="text" class="form-control" id="title" name="mTitle">
				</div>
				<div class="mb-3">
				  	<label for="content" class="form-label"></label><!--내용-->
				  	<textarea class="form-control" id="content" rows="20" style="resize: none;" name="mContent"></textarea>
				</div>
				<label for="file" class="form-label"></label><br><!--첨부파일-->
				<button type="button" class="btn btn-dark btn-sm h-50" id="addFile">파일추가</button> <br><br>
					<div id="fileArea">
					   <div class="mb-3">
					      <input type="file" class="form-control form-control-sm" name="file">
					   </div>
					</div>
				<div class="row border-top border-black pt-3">
					<button class="btn btn-dark">등록</button>
				</div>
			</form>
			<script>
				// 문서가 로드되면 실행되는 함수를 정의합니다.
				document.addEventListener('DOMContentLoaded', function() {
				  // 폼 요소를 선택하고 onsubmit 이벤트 핸들러를 추가합니다.
				  document.getElementById('attmForm').onsubmit = function() {
				    // 파일 인풋 요소를 선택합니다.
				    var fileInput = document.querySelector('input[type="file"]');
				    
				    // 파일 인풋에 파일이 없는 경우
				    if (!fileInput.value) {
				      // 경고창을 표시합니다.
				      alert('사진을 첨부하세요');
				      // 기본 이벤트(폼 제출)를 중단합니다.
				      return false;
				    }
				  };
				});
			</script>
		</div>
		
		
	</div>
	
	<script>
		// 해당 페이지 nav bar 강조 넣기
		// 페이지 별로 id만 수정 하면 됨 eg.) topAdd1, topAdd2, ...
		const boardNav = document.getElementById("topAdd7");
		$(boardNav).addClass('active');
		
		
		// 수업시간
		window.onload = () =>{
			const fileArea = document.querySelector('#fileArea');
			document.getElementById('addFile').addEventListener('click', () =>{
				const newDiv = document.createElement('div');
				newDiv.classList.add('mb-3');
				newDiv.innerHTML = '<input type = "file" class = "form-control form-control-sm" name ="file">';
				
				fileArea.append(newDiv);
			});
		}
	</script>
	
</body>
</html>