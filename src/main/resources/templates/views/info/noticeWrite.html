<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>WOOFLY</title>
<link rel="icon" th:href="@{/image/woofly.png}">
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css"
	rel="stylesheet"
	integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9"
	crossorigin="anonymous">
<style>
	.board-list {
		cursor: pointer;
	}
</style>
</head>
<body>
    <div th:replace="~{common/top :: top}"></div>
	<main>
		<div class="container-fluid d-flex mx-5">
			
			<!-- 관리자만 보이게!!!!!!!!!!!!!!!!!!! -->
			<div th:replace="~{common/adminNav :: adminNav}"></div>
			
			<div class="col-10 mb-5">
			 <div class="container mt-4">
			  <div class="row">
			   <div class="col-md-12 mb-4">
			    <div class="card">
					<div class="card-header">
						<h4>공지 등록</h4>
					</div>
					<div class="card-body">
						<form action="/info/insertNotice" method="POST">
							<table class="table">
								<tbody>
									<tr>
										<th>카테고리</th>
										<td>
											<select class="form-select" aria-label="Default select example" name="nCategory">
												<option value="공지" selected>공 지</option>
												<option value="콘테스트">콘테스트</option>
												<option value="쇼핑몰">쇼핑몰</option>
												<option value="커뮤니티">커뮤니티</option>
											</select>
										</td>
									</tr>
									<tr>
										<th>공지 제목</th>
										<td>
											<textarea class="form-control" rows="2" placeholder="제목" style="resize: none;" name="nTitle" required="required"></textarea>
										</td>
									</tr>
									<tr>
										<th>공지 내용</th>
										<td>
											<textarea class="form-control" rows="6" placeholder="내용" style="resize: none;" name="nContent" required="required"></textarea>
										</td>
									</tr>
									<tr>
										<th>파일 등록</th>
										<td>															
											<div id="fileArea">
												<div class="mb-3">
													<input type="file" class="form-control form-control-sm" name="file">
												</div>
											</div>
											<button type="button" class="w-15 btn btn-outline-dark" id="addFile">+ 파일추가</button>
										</td>
									</tr>
								</tbody>
							</table>
							<div class="container text-center">
								<button class="btn btn-lg fs-10 col-2 m-0 rounded-2 btn-outline-primary">등록</button>
								<button type="button" class="btn btn-lg fs-10 col-2 m-0 rounded-2 btn-outline-dark" onclick="javascript:history.back();">이전</button>
							</div>
						</form>
					</div>
			    </div>
			   </div>
			  </div>
			 </div>
			</div>
		</div>
    </main>
    
    
<script>
	window.onload = () =>{
		const fileArea = document.querySelector('#fileArea');
		document.getElementById('addFile').addEventListener('click', () =>{
			const newDiv = document.createElement('div');
			newDiv.classList.add('mb-3');
			newDiv.innerHTML = '<input type="file" class="form-control form-control-sm" name="file">';
			
			fileArea.append(newDiv);
		
		});
	
		const form = document.getElementById('attmForm');
		document.getElementById('submitAttm').addEventListener('click', () =>{
			const files = document.getElementsByName('file');
			console.log(files);
			let isEmpty = true;
			for(const f of files) {
				if(f.value != '') {
					isEmpty = false;
				}
			}
			
			if(isEmpty) {
				$('#modalChoice').modal('show');
			} else {
				form.submit();
			}
		});
	
		document.getElementById('moveBoard').addEventListener('click', () =>{
			form.submit();
		});
		
		const anav = document.getElementById('myNav1')
		anav.style.fontWeight = 'bold';
	}	
</script>
	
</body>
</html>