<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>WOOFLY</title>
<link rel="icon" href="image/woofly.png">
<style>
	.active {
		color: black !important;
		font-weight: 700 !important;
	}
</style>
<script src="http://t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
</head>
<body>
	<!-- top navigation bar -->
	<!-- 마이 페이지에 공통으로 들어가는 navigation bar -->
	<div th:replace="~{common/top :: top}"></div>
	<!-- 메인 네비게이션 바 아래 있는 모든 요소들 -->
	<main>
		<div class="d-flex justify-content-between mx-5">
			<div th:replace="~{common/myNav :: myNav}"></div>
			<!-- 아래만 수정해주세요 -->
			<!-- 아래만 수정해주세요 -->
			<!-- 아래만 수정해주세요 -->
			<!-- 아래만 수정해주세요 -->
			<!-- 아래만 수정해주세요 -->
			<!-- 아래만 수정해주세요 -->
			<div class="col-10 pt-3 mb-5 me-4">
				<div class="d-flex justify-content-between mb-5">
					<h3>주소록</h3>
					<div class="my-auto">
						<button class="btn btn-outline-dark btn-sm" data-bs-toggle="modal" data-bs-target="#newAddr">+새 배송지 추가</button>
					</div>
				</div>
				<div class="d-flex justify-content-between border-bottom border-black border-3">
					<div>
						<div class="d-flex mb-1" style="height: 20px;">
							<p>김**</p> &nbsp;&nbsp;
							<div>
								<span class="badge rounded-pill text-bg-light">기본 배송지</span>
							</div>
						</div>
						<p class="mb-0">010-5●●●-●469</p>
						<p>(28221)충북 청주시 흥덕구 오송읍 오송생명14로 215 (오송역 동아라이크텐) 101동 1204호</p>
					</div>
					<div class="my-auto">
						<button class="btn btn-sm btn-outline-dark updateBtn" data-bs-toggle="modal" data-bs-target="#updateAddr">수정</button>
						<button class="btn btn-sm btn-outline-dark">삭제</button>
					</div>
				</div>
				
				<div class="modal fade" id="newAddr" tabindex="-1">
					<div class="modal-dialog modal-dialog-centered">
						<div class="modal-content">
							<div class="modal-header text-center">
				        		<h1 class="modal-title fs-5" id="">새 주소 추가</h1>
	 				        	<button type="button" class="btn-close" data-bs-dismiss="modal"></button>
							</div>
							<div class="modal-body text-left">
								<div class="mb-3">
								    <label for="name" class="form-label">이름</label>
									<input type="text" class="form-control" id="newName" placeholder="수령인의 이름">
								</div>
								<div class="mb-3">
								    <label for="phone" class="form-label">휴대폰 번호</label>
									<input type="text" class="form-control" id="newPhone" placeholder="- 없이 입력">
								</div>
								<div class="mb-3 d-flex align-items-end gap-4">
									<div class="col-9">
									    <label for="postcode" class="form-label">우편번호</label>
										<input type="text" class="form-control" id="newPostcode" readonly placeholder="우편 번호를 검색하세요">
									</div>
									<div class="col-3">
										<button class="btn btn-outline-dark btn">우편번호</button>
									</div>
								</div>
								<div class="mb-3">
								    <label for="addr" class="form-label">주소</label>
									<input type="text" class="form-control" id="newAddr" readonly placeholder="우편 번호 검색후 자동 입력됩니다">
								</div>
								<div class="mb-3">
								    <label for="detail-addr" class="form-label">상세주소</label>
									<input type="text" class="form-control" id="newDetailAddr" placeholder="건물, 아파트, 동/호수 입력">
								</div>
								<div class="form-check mb-3">
								  	<input class="form-check-input" type="checkbox" value="" id="newCheckBox">
								  	<label class="form-check-label text-secondary" for="checkBox">
								    	기본 배송지로 설정
								  	</label>
								</div>
								<div class="text-center">
									<button class="btn btn-outline-dark" data-bs-dismiss="modal">취소</button>
									<button class="btn btn-dark">저장하기</button>
								</div>
							</div>
						</div>
					</div>
				</div>
				
				<div class="modal fade" id="updateAddr" tabindex="-1">
					<div class="modal-dialog modal-dialog-centered">
						<div class="modal-content">
							<div class="modal-header text-center">
				        		<h1 class="modal-title fs-5" id="">배송지 추가</h1>
	 				        	<button type="button" class="btn-close" data-bs-dismiss="modal"></button>
							</div>
							<div class="modal-body text-left">
								<div class="mb-3">
								    <label for="name" class="form-label">이름</label>
									<input type="text" class="form-control" id="name" placeholder="수령인의 이름">
								</div>
								<div class="mb-3">
								    <label for="phone" class="form-label">휴대폰 번호</label>
									<input type="text" class="form-control" id="phone" placeholder="- 없이 입력">
								</div>
								<div class="mb-3 d-flex align-items-end gap-4">
									<div class="col-9">
									    <label for="postcode" class="form-label">우편번호</label>
										<input type="text" class="form-control" id="postcode" readonly placeholder="우편 번호를 검색하세요">
									</div>
									<div class="col-3">
										<button class="btn btn-outline-dark btn" onclick="updateAddr();">우편번호</button>
									</div>
								</div>
								<div class="mb-3">
								    <label for="addr" class="form-label">주소</label>
									<input type="text" class="form-control" id="addr" readonly placeholder="우편 번호 검색후 자동 입력됩니다">
								</div>
								<div class="mb-3">
								    <label for="detail-addr" class="form-label">상세주소</label>
									<input type="text" class="form-control" id="detail-addr" placeholder="건물, 아파트, 동/호수 입력">
								</div>
								<div class="form-check mb-3">
								  	<input class="form-check-input" type="checkbox" value="" id="checkBox">
								  	<label class="form-check-label text-secondary" for="checkBox">
								    	기본 배송지로 설정
								  	</label>
								</div>
								<div class="text-center">
									<button class="btn btn-outline-dark" data-bs-dismiss="modal">취소</button>
									<button class="btn btn-dark">저장하기</button>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<!-- 여기까지가 수정 -->
			<!-- 여기까지가 수정 -->
			<!-- 여기까지가 수정 -->
			<!-- 여기까지가 수정 -->
			<!-- 여기까지가 수정 -->
			<!-- 여기까지가 수정 -->
			<!-- 여기까지가 수정 -->
		</div>
	</main>
	
	<script>
		const myNav = document.getElementById("myNav6");
		$(myNav).removeClass('text-secondary');
		$(myNav).addClass('active');
		
		const updateBtns = document.getElementsByClassName("updateBtn");
		for (const updateBtn of updateBtns) {
			console.log(updateBtn);
		}
		
		const updateAddr = () => {
		    new daum.Postcode({
		        oncomplete: function(data) {
		        	// 팝업에서 검색결과 항목을 클릭했을때 실행할 코드를 작성하는 부분.

	                // 도로명 주소의 노출 규칙에 따라 주소를 표시한다.
	                // 내려오는 변수가 값이 없는 경우엔 공백('')값을 가지므로, 이를 참고하여 분기 한다.
	                var roadAddr = data.roadAddress; // 도로명 주소 변수
	                var extraRoadAddr = ''; // 참고 항목 변수

	                // 법정동명이 있을 경우 추가한다. (법정리는 제외)
	                // 법정동의 경우 마지막 문자가 "동/로/가"로 끝난다.
	                if(data.bname !== '' && /[동|로|가]$/g.test(data.bname)){
	                    extraRoadAddr += data.bname;
	                }
	                // 건물명이 있고, 공동주택일 경우 추가한다.
	                if(data.buildingName !== ''){
	                   extraRoadAddr += (extraRoadAddr !== '' ? ', ' + data.buildingName : data.buildingName);
	                }
	                // 표시할 참고항목이 있을 경우, 괄호까지 추가한 최종 문자열을 만든다.
	                if(extraRoadAddr !== ''){
	                    extraRoadAddr = ' (' + extraRoadAddr + ')';
	                }

	                // 우편번호와 주소 정보를 해당 필드에 넣는다.
	                document.getElementById('postcode').value = data.zonecode;
	                document.getElementById("addr").value = roadAddr + extraRoadAddr;
	                
            	}
		    }).open();
		}
		

	</script>
</body>
</html>